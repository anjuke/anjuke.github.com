---
layout: post
title: "Problem: spider requests"
author: erning
date: 2012-03-01 16:39
comments: true
categories: 
---

我们看下面这张图表，它显示的是2012年2月28日二手房房源列表页的HTTP请求情况。

![SOJ vs Spider][1]

* <span style="color:#e0b000">**黄色**</span>的部分是SOJ上记录的请求数量

  这部分基本体现了正常浏览器的访问次数。

* <span style="color:#008000">**绿色**</span>的部分是LB访问日志上记录的百度爬虫访问数量

  百度爬虫在一天中的每小时访问数量基本不变，占我们全部请求量的15%左右。

* <span style="color:#0000ff">**蓝色**</span>的部是LB访问日志上记录的其他访问数量。

  这部分访问量占全天请求数量的大部分，我们不清楚是具体都什么样的请求。估计是各类爬虫。


现在我们发现有50%以上的请求是机器人，而这些请求一样消耗我们的服务器资源。机器人和真正的用户对网站的需求可能是不一样的。例如，用户访问的时候希望页面的更新是实时的；搜索引擎爬虫希望页面尽量快，但是对页面更新没有那么高的要求。

能不能区分对待这些请求？做到提高网站的响应速度，节省服务资源，还能更好地满足两类访问者的需求？

  [1]: /medias/20120301/soj-vs-spiders.png

